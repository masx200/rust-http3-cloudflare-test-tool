<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Hickory DNS is intended to be a fully compliant domain name server and client library."><title>hickory_client - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-e56847b5.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="hickory_client" data-themes="" data-resource-suffix="" data-rustdoc-version="1.91.1 (ed61e7d7e 2025-11-07)" data-channel="1.91.1" data-search-js="search-e256b49e.js" data-stringdex-js="stringdex-c3e638e9.js" data-settings-js="settings-c38705f0.js" ><script src="../static.files/storage-e2aeef58.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-6dc2a7f3.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-263c88ec.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-eab170b8.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">Crate hickory_client</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../hickory_client/index.html">hickory_<wbr>client</a><span class="version">0.26.0-alpha.1</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section id="rustdoc-toc"><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#goals" title="Goals">Goals</a></li><li><a href="#usage" title="Usage">Usage</a><ul><li><a href="#dependency" title="Dependency">Dependency</a></li><li><a href="#objects" title="Objects">Objects</a></li><li><a href="#dynamic-update" title="Dynamic update">Dynamic update</a></li></ul></li></ul><h3><a href="#reexports">Crate Items</a></h3><ul class="block"><li><a href="#reexports" title="Re-exports">Re-exports</a></li><li><a href="#modules" title="Modules">Modules</a></li><li><a href="#functions" title="Functions">Functions</a></li></ul></section><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content"><div class="main-heading"><h1>Crate <span>hickory_<wbr>client</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/hickory_client/lib.rs.html#18-151">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Hickory DNS is intended to be a fully compliant domain name server and client library.</p>
<p>The Client library is responsible for the basic protocols responsible for communicating with DNS servers (authorities) and resolvers. It can be used for managing DNS records through the use of update operations. It is possible to send raw DNS Messages with the Client, but for ease of use the <code>query</code> and various other update operations are recommended for general use.</p>
<p>For a system-like resolver, see <a href="https://docs.rs/hickory-resolver">hickory-resolver</a>. This is most likely what you want if all you want to do is lookup IP addresses.</p>
<p>For serving DNS serving, see <a href="https://docs.rs/hickory-server">hickory-server</a>.</p>
<h2 id="goals"><a class="doc-anchor" href="#goals">§</a>Goals</h2>
<ul>
<li>Only safe Rust</li>
<li>All errors handled</li>
<li>Simple to manage servers</li>
<li>High level abstraction for clients</li>
<li>Secure dynamic update</li>
<li>New features for securing public information</li>
</ul>
<h2 id="usage"><a class="doc-anchor" href="#usage">§</a>Usage</h2>
<p>This shows basic usage of the Client. More examples will be associated directly with other types.</p>
<h3 id="dependency"><a class="doc-anchor" href="#dependency">§</a>Dependency</h3><div class="example-wrap"><pre class="language-toml"><code>[dependencies]
hickory-client = &quot;*&quot;</code></pre></div>
<p>By default DNSSEC validation is built in with OpenSSL, this can be disabled with:</p>
<div class="example-wrap"><pre class="language-toml"><code>[dependencies]
hickory-client = { version = &quot;*&quot;, default-features = false }</code></pre></div><h3 id="objects"><a class="doc-anchor" href="#objects">§</a>Objects</h3>
<p>There are two variations of implementations of the client: the <a href="client/struct.Client.html" title="struct hickory_client::client::Client"><code>client::Client</code></a>, an
async client usually used with the Tokio runtime and the [<code>client::DnssecClient</code>], which
validates DNSSEC records. For these basic examples we’ll only look at the <code>Client</code>.</p>
<p>First we must decide on the type of connection. For the purpose of this example, we’ll
show how to set up a TCP-based connection.</p>
<p>This example is meant to show basic usage, using the <code>#[tokio::main]</code> macro to setup a simple
runtime. The Tokio documentation should be reviewed for more advanced usage.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>std::net::Ipv4Addr;
<span class="kw">use </span>std::str::FromStr;
<span class="kw">use </span>tokio::net::TcpStream <span class="kw">as </span>TokioTcpStream;
<span class="kw">use </span>hickory_client::client::{Client, ClientHandle};
<span class="kw">use </span>hickory_client::proto::runtime::TokioRuntimeProvider;
<span class="kw">use </span>hickory_client::proto::rr::{DNSClass, Name, RData, RecordType};
<span class="kw">use </span>hickory_client::proto::rr::rdata::A;
<span class="kw">use </span>hickory_client::proto::tcp::TcpClientStream;

<span class="attr">#[tokio::main]
</span><span class="kw">async fn </span>main() {
    <span class="comment">// Since we used UDP in the previous examples, let's change things up a bit and use TCP here
    </span><span class="kw">let </span>(stream, sender) =
        TcpClientStream::new(([<span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>], <span class="number">53</span>).into(), <span class="prelude-val">None</span>, <span class="prelude-val">None</span>, TokioRuntimeProvider::new());

    <span class="comment">// Create a new client, the bg is a background future which handles
    //   the multiplexing of the DNS requests to the server.
    //   the client is a handle to an unbounded queue for sending requests via the
    //   background. The background must be scheduled to run before the client can
    //   send any dns requests
    </span><span class="kw">let </span>client = Client::&lt;TokioRuntimeProvider&gt;::new(stream, sender, <span class="prelude-val">None</span>);

    <span class="comment">// await the connection to be established
    </span><span class="kw">let </span>(<span class="kw-2">mut </span>client, bg) = client.<span class="kw">await</span>.expect(<span class="string">"connection failed"</span>);

    <span class="comment">// make sure to run the background task
    </span>tokio::spawn(bg);

    <span class="comment">// Create a query future
    </span><span class="kw">let </span>query = client.query(
        Name::from_str(<span class="string">"www.example.com."</span>).unwrap(),
        DNSClass::IN,
        RecordType::A,
   );

    <span class="comment">// wait for its response
    </span><span class="kw">let </span>response = query.<span class="kw">await</span>.unwrap();

    <span class="comment">// validate it's what we expected
    </span><span class="kw">if let </span>RData::A(addr) = response.answers()[<span class="number">0</span>].data() {
        <span class="macro">assert_eq!</span>(<span class="kw-2">*</span>addr, A::new(<span class="number">93</span>, <span class="number">184</span>, <span class="number">215</span>, <span class="number">14</span>));
    }
}</code></pre></div>
<p>In the above example we successfully queried for a A record. There are many other types, each
can be independently queried and the associated <a href="../hickory_proto/rr/record_data/enum.RData.html" title="enum hickory_proto::rr::record_data::RData"><code>crate::proto::rr::record_data::RData</code></a>
has a variant with the deserialized data for the record stored.</p>
<h3 id="dynamic-update"><a class="doc-anchor" href="#dynamic-update">§</a>Dynamic update</h3>
<p>Currently <code>hickory-client</code> supports SIG(0) signed records for authentication and authorization
of dynamic DNS updates. Consult the [<code>client::DnssecClient</code>] API for more information.</p>
</div></details><h2 id="reexports" class="section-header">Re-exports<a href="#reexports" class="anchor">§</a></h2><dl class="item-table reexports"><dt id="reexport.proto"><code>pub use <a class="mod" href="../hickory_proto/index.html" title="mod hickory_proto">hickory_proto</a> as proto;</code></dt></dl><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><dl class="item-table"><dt><a class="mod" href="client/index.html" title="mod hickory_client::client">client</a></dt><dd>DNS Client associated classes for performing queries and other operations.</dd></dl><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><dl class="item-table"><dt><a class="fn" href="fn.version.html" title="fn hickory_client::version">version</a></dt><dd>Returns a version as specified in Cargo.toml</dd></dl></section></div></main></body></html>